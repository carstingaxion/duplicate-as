(()=>{"use strict";var t={n:e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return t.d(s,{a:s}),s},d:(e,s)=>{for(var a in s)t.o(s,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:s[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const e=window.wp.plugins,s=window.wp.element,a=window.wp.i18n,o=window.wp.apiFetch;var r=t.n(o);const n=window.wp.data,p=window.wp.editor,i=window.wp.coreData,c=window.wp.components,u=window.ReactJSXRuntime;function d({postId:t,targetPostType:e,currentPostType:o,targetPostTypeObject:p}){const[i,d]=(0,s.useState)(!1),l=e&&e!==o,y=l?(0,a.sprintf)(/* translators: %s: target post type singular name */ /* translators: %s: target post type singular name */
(0,a.__)("Duplicate as %s","duplicate-as"),p?.labels?.singular_name||e):(0,a.__)("Duplicate","duplicate-as"),g=l?function(t){return t&&"string"==typeof t?t.startsWith("data:")?"admin-page":t.startsWith("dashicons-")?t.replace("dashicons-",""):t:"admin-page"}(p?.icon):"admin-page";return(0,u.jsx)(c.Button,{variant:"secondary",isPressed:!1,isBusy:i,onClick:async()=>{if(t&&!i){d(!0);try{const s=e?{target_post_type:e}:{},a=await r()({path:`/duplicate-as/v1/duplicate/${t}`,method:"POST",data:s});a.success&&a.edit_url&&(window.location.href=a.edit_url)}catch(t){const e=l?(0,a.__)("Failed to transform post. Please try again.","duplicate-as"):(0,a.__)("Failed to duplicate post. Please try again.","duplicate-as");(0,n.dispatch)("core/notices").createNotice("error",e,{isDismissible:!0}),d(!1)}}},disabled:i,icon:g,className:"duplicate-as-button",children:i?(0,a.__)("Processingâ€¦","duplicate-as"):y})}(0,e.registerPlugin)("duplicate-as",{render:function(){const{postId:t,postType:e,postTypeObject:s,allPostTypes:a}=(0,n.useSelect)(t=>{const e=t(p.store).getCurrentPostType(),s=t(i.store).getPostType(e),a=t(i.store).getPostTypes({per_page:-1})||[];return{postId:t(p.store).getCurrentPostId(),postType:e,postTypeObject:s,allPostTypes:a}},[]);if(!t||!s?.supports?.duplicate_as)return null;const o=function(t){if(!t?.supports?.duplicate_as)return[];const e=t.supports.duplicate_as;return Array.isArray(e)?e[0].filter(t=>"string"==typeof t&&t.length>0):"string"==typeof e&&e.length>0?[e]:[]}(s),r=[];return 0===o.length?r.push({key:`duplicate-${e}`,postId:t,targetPostType:null,currentPostType:e,targetPostTypeObject:s}):o.forEach(o=>{const n=a.find(t=>t.slug===o);o===e?r.push({key:`duplicate-${e}`,postId:t,targetPostType:null,currentPostType:e,targetPostTypeObject:s}):r.push({key:`transform-${e}-to-${o}`,postId:t,targetPostType:o,currentPostType:e,targetPostTypeObject:n})}),(0,u.jsx)(p.PluginPostStatusInfo,{className:"duplicate-as-status-info",children:r.map(({key:t,...e})=>(0,u.jsx)(d,{...e},t))})}})})();